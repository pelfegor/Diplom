# План автоматизации тестирования
## Перечень автоматизируемых сценариев:
### Примечание:
- Открыта [страница покупки тура](https://localhost:8080/) , которая **доступна только при запущенной SUT**.

### Валидными данными являются:
- Поле "Номер карты": Только 16 цифр
- Поле "Месяц": Только цифры в формате двух знаков, от 01 до 12
- Поле "Год": Только цифры в формате двух последних цифр года, при этом не меньше текщего года(21) и не больше, чем 5 лет(28)
- Поле "Владелец": Фамилию и имя на английском языке
- Поле "CVC/CVV": Только 3 цифры


### Позитивные сценарии:
1. **Оплата картой:**
    - Нажать на кнопку "Купить" (Оплата по Карте) -> в появившихся полях ввести валидные данные -> кликнуть кнопку "Продолжить";  
      `ОР:`
        - форма успешно отправляется и могжет быть просмотрена в БД;
        - появится всплывающее окно об одобрении операции банком.
2. **Покупка в кредит:**
    - Нажать на кнопку "Купить в кредит" -> в появившихся полях ввести валидные данные -> кликнуть кнопку "Продолжить";  
      `ОР::`
        - форма успешно отправляется и могжет быть просмотрена в БД;
        - появится всплывающее окно об одобрении операции банком.
### Негативные сценарии:
1. **Пустая форма:**
    - Нажать на кнопку "Купить" (оплата по карте) -> нажать на кнопку "Продолжить";  
      `Результат:`
        - форма не отправляется;
        - под полями ввода появляются сообщения о необходимости ввода данных.
1. **Поле "Номер карты":**
    - Нажать на кнопку "Купить" (оплата по карте) -> в поле "Номер карты" **ввести не полный номер** (4444 4444 4444 444), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Номер карты" появляется сообщение `Неверный формат`.
    - Нажать на кнопку "Купить" (оплата по карте) -> в поле "Номер карты" **ввести 16 нулей** (0000 0000 0000 0000), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма успешно отправляется и могжет быть просмотрена в БД;
        - появляется всплывающее окно об отказе в проведении операции банком.
    - Нажать на кнопку "Купить" (оплата по карте) -> в поле "Номер карты" **ввести не валидный номер** (4444 4444 4444 4442), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма успешно отправляется и могжет быть просмотрена в БД;
        - появляется всплывающее окно об отказе в проведении операции банком.
1. **Поле "Месяц":**
    - Нажать на кнопку "Купить" (оплата по карте) -> в поле "Месяц" **ввести одну цифру** (5), остальные поля заполнить валидными данными -> нажать на  кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Месяц" появляется сообщение `Неверно указан срок действия карты`.
    - Нажать на кнопку "Купить" (оплата по карте) -> в поле "Месяц" **ввести не валидный месяц** (нижнее граничное значение 00), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Месяц" появляется сообщение `Неверно указан срок действия карты`.
    - Нажать на кнопку "Купить" (оплата по карте) -> в поле "Месяц" **ввести прошедший месяц** (если сейчас месяц 12, то ввести 11), в поле "Год" ввести нынешний год,  остальные поля заполнить валидными данными -> нажать на  кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Месяц" появляется сообщение `Неверно указан срок действия карты`.
    - Нажать на кнопку "Купить" (оплата по карте) -> в поле "Месяц" **ввести не валидный месяц** (верхнее граничное значение 13), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Месяц" появляется сообщение `Неверно указан срок действия карты`.
1. **Поле "Год":**
    - Нажать на кнопку "Купить" (оплата по карте) -> в поле "Год" **ввести не валидный год** (меньше текущего года), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Год" появляется сообщение `Истёк срок действия карты`.
    - Нажать на кнопку "Купить" (оплата по карте) -> в поле "Год" **ввести два нуля** (00), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Год" появляется сообщение `Неверно указан срок действия карты`.
    - Нажать на кнопку "Купить" (оплата по карте) -> в поле "Год" **ввести не валидный год** (больше текущего года на 6 лет), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Год" появляется сообщение `Неверно указан срок действия карты`.
1. **Поле "Владелец":**
    - Нажать на кнопку "Купить" (оплата картой) -> в поле "Владелец" **ввести " "**(пробел), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Владелец" появляется сообщение `Поле обязательно для заполнения`.
    - Нажать на кнопку "Купить" (оплата картой) -> в поле "Владелец" **ввести #&**(спецсимволы), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Владелец" появляется сообщение `Неверный формат имени владельца`.
    - Нажать на кнопку "Купить" (оплата картой) -> в поле "Владелец" **ввести полное ФИО**(Ivanov Ivan Ivanovich), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Владелец" появляется сообщение `Неверный формат имени владельца`.
    - Нажать на кнопку "Купить" (оплата картой) -> в поле "Владелец" **ввести только имя/фамилия**(Ivan), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Владелец" появляется сообщение `Неверный формат имени владельца`.
    - Нажать на кнопку "Купить" (оплата картой) -> в поле "Владелец" **ввести буквы на кириллице**(Иванов Иван), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Владелец" появляется сообщение `Неверный формат имени владельца`.
    - Нажать на кнопку "Купить" (оплата картой) -> в поле "Владелец" **ввести число**, остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "Владелец" появляется сообщение `Неверный формат имени владельца`.
1. **Поле "CVC/CVV":**
    - Нажать на кнопку "Купить" (оплата картой) -> в поле "CVC/CVV" **ввести 3 нуля**(000), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "CVC/CVV" появляется сообщение `Неверный формат`
    - Нажать на кнопку "Купить" (оплата картой) -> в поле "CVC/CVV" **ввести двузначное число**(10-99), остальные поля заполнить валидными данными -> нажать на кнопку "Продолжить";  
      `ОР:`
        - форма не отправляется;
        - под полем "CVC/CVV" появляется сообщение `Неверный формат`.
- **`Аналогичные негативные сценарии для покупки в кредит.`**

## Тестирование API

Необходимо проверить через API банковские карты и их статусы в БД.

Данные для карты со статусом APPROVED: Номер карты - 4444444444444441, Месяц - 09, Год - 24, Владелец - Ivanov Ivan, CVC/CVV - 123
Данные для карты со статусом DECLINED: Номер карты - 4444444444444442, Месяц - 09, Год - 24, Владелец - Ivanov Ivan, CVC/CVV - 123

Перечень тестируемых сценариев:
1. При оплате по карте 4444444444444441 (обращение к http://localhost:8080/api/v1/pay) ответ сервера - код 200 OK, статус карты APPROVED
2. При оплате по карте 4444444444444442 (обращение к http://localhost:8080/api/v1/pay) ответ сервера - код 200 OK, статус карты DECLINED
3. При отправке заявки на кредит по карте 4444444444444441 (обращение к http://localhost:8080/api/v1/credit) ответ сервера - код 200 OK, статус карты APPROVED
4. При отправке заявки на кредит по карте 4444444444444442 (обращение к http://localhost:8080/api/v1/credit) ответ сервера - код 200 OK, статус карты DECLINED

## Перечень используемых инструментов с обоснованием выбора:
- IDE: IntelliJ IDEA
- Язык программирования: Java, SQL
- Система сборки: Gradle (так как это инструмент автоматизации сборки с открытым исходным кодом, ориентированный на гибкость и производительность.)
- Тестовая среда: JUnit5 (До сех пор работал только на нем, и вполне устраивает функционал)
- DBeaver, для просмотра базы данных;
- Система репортинга: Allure (репорты gradle будет мало, а report portal излишен)
- Фреймворк для UI тестирования: Selenide (удобный инструмент работы с графическими компонентами)
- Фреймворк для API тестирования: REST Assured
- Фреймворки для управления данными: Java Faker (для генерации данных), Docker (для создания контейнера тестируемой БД)
## Перечень и описание возможных рисков при автоматизации:
- Потеря актуальности тестов при изменение UI сайта
- Отсутствие требований на поля;
## Интервальная оценка с учётом рисков (в часах):
- Примерно 60 часов.
## План сдачи работ (когда будут авто-тесты, результаты их прогона и отчёт по автоматизации):
- Написание авто-тестов: к 12.12.2022;
- Подготовка отчетов по результатам прогона тестов: к 17.12.2022;
- Подготовка отчета по итогам автоматизации: к 19.12.2022;
